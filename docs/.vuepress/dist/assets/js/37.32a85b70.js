(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{205:function(t,o,i){},206:function(t,o,i){},489:function(t,o,i){"use strict";var e=i(205);i.n(e).a},490:function(t,o,i){"use strict";var e=i(206);i.n(e).a},557:function(t,o,i){"use strict";i.r(o);i(16),i(9);var e=i(0),s=(i(253),i(34),i(72),i(162)),a=i(79),r=(i(143),{name:"s-imageCrop",props:{crossOrigin:{type:Boolean,default:!1,required:!1},crossOriginHeader:{type:String,default:"*",required:!1},label:{type:String,default:"选择图片",required:!1},isModal:{type:Boolean,default:!0,required:!1},lockScroll:{type:Boolean,default:!0,required:!1},showChooseBtn:{type:Boolean,default:!0,required:!1},boxWidth:{type:Number,default:800,required:!1},boxHeight:{type:Number,default:400,required:!1},cutWidth:{type:Number,default:200,required:!1},cutHeight:{type:Number,default:200,required:!1},rate:{type:String,default:null,required:!1},tool:{type:Boolean,default:!0,required:!1},toolBgc:{type:String,default:"#fff",required:!1},sizeChange:{type:Boolean,default:!0,required:!1},originalGraph:{type:Boolean,default:!1,required:!1},moveAble:{type:Boolean,default:!0,required:!1},CuttingOriginal:{type:Boolean,default:!1,required:!1},DoNotDisplayCopyright:{type:Boolean,default:!1,required:!1}},model:["label","boxWidth","boxHeight","rate","tool","DoNotDisplayCopyright"],data:function(){return{visible:!1,fileName:"",cutImageObj:null,toolBoxPosition:{x:0,y:0},drawImg:{img:null,sx:0,sy:0,swidth:0,sheight:0,x:0,y:0,width:0,height:0},toolBox:{disable:!0,width:this.boxWidth/2,height:this.boxHeight/2,x:0,y:0,boxMove:{start:{x:0,y:0},moveTo:{x:0,y:0}}},dropImg:{active:!1,pageX:0,pageY:0,params:{}},rotateImg:{angle:0},rotateControl:{active:!1,start:{x:0,y:0},position:100},scaleImg:{rate:0,params:{}},controlBox:{disable:!0,btnName:"",start:{x:0,y:0,width:0,height:0}},selectBox:!1,selectBoxColor:"rgba(0,0,0,0.6)"}},mounted:function(){var t=this;!1===this.isModal&&(this.visible=!0,this.$nextTick((function(){"mousewheel"==(/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel")?t.$refs.toolBox.onmousewheel=t.scaleImgWheel:t.$refs.toolBox.addEventListener("DOMMouseScroll",t.scaleImgWheel)})))},methods:{handleOpen:function(t){var o=this,i=this,e=function(t){if("mousewheel"==(/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel")?i.$refs.toolBox.onmousewheel=o.scaleImgWheel:i.$refs.toolBox.addEventListener("DOMMouseScroll",o.scaleImgWheel),!0===i.isModal){!0===i.lockScroll&&(document.body.style.overflowY="hidden");var e=i.$refs.dialogMainModalRef.offsetHeight+200,s=window.innerHeight,a=i.$refs.mask;a.style.overflowY=e>s?"scroll":"hidden"}t&&"function"==typeof t&&t()};if(t&&"object"==Object(a.a)(t)&&t.src){if(!(t.width&&t.height&&t.name))throw new Error("传入参数必须包含：src,width,height,name");var s=new Image;!0===this.crossOrigin&&(s.crossOrigin=this.crossOriginHeader),s.name=t.name,s.width=t.width,s.height=t.height,s.style.position="fixed",s.style.top=-5e3,s.style.opacity=0,s.onerror=function(t){console.error("图片加载失败"),i.$emit("error",{event:t,msg:"图片加载失败"}),i.clearCutImageObj()},s.onload=function(){if(!0!==s.complete)throw new Error("图片加载失败");i.visible=!0,i.$nextTick((function(){e((function(){i.importImgToCanv(s)}))}))},s.src=t.src,this.cutImageObj=s,document.body.appendChild(s)}else i.visible=!0,i.$nextTick((function(){e()}))},handleClose:function(){var t=this;this.clearAll(),!0===this.isModal&&(!0===this.lockScroll&&(document.body.style.overflowY="scroll"),this.$nextTick((function(){t.visible=!1})))},chooseImg:function(){this.$refs.inputFile.click()},importImgToCanv:function(t){this.fileName=t.name;var o,i=t.height,e=t.width,a=this.boxWidth,r=this.boxHeight,n=Object(s.a)({},this.drawImg);n.img=t,this.scaleImg.rate=e/i,i<r&&e<a?(o=1,n.x=(a-e)/2,n.y=(r-i)/2):e/i<=a/r?(o=r/i,n.x=(a-e*o)/2):(o=a/e,n.y=(r-i*o)/2),n.swidth=e,n.sheight=i,n.width=e*o,n.height=i*o,n.x=(a-n.width)/2,n.y=(r-n.height)/2,this.$set(this,"drawImg",n),this.printImg(),this.putToolBox()},putImgToCanv:function(t){var o,i=this;if(!t.target.files)return console.error("IE9及以下需要自己传入image对象"),!1;if(o=t.target.files[0]||null){this.fileName=o.name;var e=new FileReader;new Image,e.readAsDataURL(o),e.onload=function(t){var o=t.target.result,a=document.createElement("img");a.src=o;var r=setInterval((function(){if(2==e.readyState){clearInterval(r);var t,o=a.height,n=a.width,l=i.boxWidth,h=i.boxHeight,c=Object(s.a)({},i.drawImg);c.img=a,i.scaleImg.rate=n/o,o<h&&n<l?(t=1,c.x=(l-n)/2,c.y=(h-o)/2):n/o<=l/h?(t=h/o,c.x=(l-n*t)/2):(t=l/n,c.y=(h-o*t)/2),c.swidth=n,c.sheight=o,c.width=n*t,c.height=o*t,c.x=(l-c.width)/2,c.y=(h-c.height)/2,i.$set(i,"drawImg",c),i.printImg()}}),200)},this.putToolBox()}},putToolBox:function(){this.toolBox.width=this.cutWidth>this.boxWidth?this.boxWidth:this.cutWidth,this.toolBox.height=this.cutHeight>this.boxHeight?this.boxHeight:this.cutHeight,this.toolBox.x=this.boxWidth/2-this.toolBox.width/2,this.toolBox.y=this.boxHeight/2-this.toolBox.height/2,this.drawControlBox(this.toolBox.width,this.toolBox.height,this.toolBox.x,this.toolBox.y)},isSupportFileApi:function(){return!!(window.File&&window.FileList&&window.FileReader&&window.Blob&&-1===navigator.userAgent.indexOf("Edge")&&-1===navigator.userAgent.indexOf("MSIE")&&-1===navigator.userAgent.indexOf("Trident"))},dataURLtoFile:function(t,o){for(var i=t.split(","),e=i[0].match(/:(.*?);/)[1],s=atob(i[1]),a=s.length,r=new Uint8Array(a);a--;)r[a]=s.charCodeAt(a);return this.isSupportFileApi()?new File([r],o,{type:e}):"不支持File对象"},clearAll:function(){var t=this.$refs.canvas;t.getContext("2d").clearRect(0,0,t.width,t.height);var o=this.$refs.canvasSelectBox;o.getContext("2d").clearRect(0,0,o.width,o.height),this.drawImg={img:null,sx:0,sy:0,swidth:0,sheight:0,x:0,y:0,width:0,height:0},this.$refs.inputFile.value="",this.rotateImg.angle=0,this.drawImg.img=null,this.turnReset(),this.clearCutImageObj()},clearCutImageObj:function(){null!==this.cutImageObj&&void 0!==this.cutImageObj&&("function"==typeof this.cutImageObj.remove?this.cutImageObj.remove():this.cutImageObj.removeNode()),this.cutImageObj=null},drawControlBox:function(t,o,i,e){t>this.boxWidth&&(t=this.boxWidth),o>this.boxHeight&&(o=this.boxHeight),i<0&&(i=0),e<0&&(e=0);var s,a,r=this.$refs.toolBoxControl,n=this.$refs.canvasSelectBox,l=n.getContext("2d");if(l.fillStyle=this.selectBoxColor,l.clearRect(0,0,n.width,n.height),l.fillRect(0,0,n.width,n.height),this.rate&&""!==this.rate){var h=this.rate.split(":")[0]/this.rate.split(":")[1];h>=1?(s=t,a=t/h):(s=o*h,a=o)}else s=t,a=o;this.toolBox.width=s,this.toolBox.height=a,r.style.width=Math.abs(s)+"px",r.style.height=Math.abs(a)+"px",this.toolBox.boxMove.moveTo.x=i,this.toolBox.boxMove.moveTo.y=e,s<0&&(i+=s),a<0&&(e+=a),i+this.toolBox.width>this.boxWidth&&(i=this.boxWidth-this.toolBox.width),i<0&&(i=0),e+this.toolBox.height>this.boxHeight&&(e=this.boxHeight-this.toolBox.height),e<0&&(e=0),this.toolBoxPosition.x=i,this.toolBoxPosition.y=e,r.style.left=i+"px",r.style.top=e+"px",l.clearRect(i,e,Math.abs(s),Math.abs(a))},resetToolBox:function(){this.toolBox.width<0&&(this.toolBox.boxMove.moveTo.x=this.toolBox.x-this.toolBox.width),this.toolBox.height<0&&(this.toolBox.boxMove.moveTo.y=this.toolBox.y-this.toolBox.height),this.toolBox.width=Math.abs(this.toolBox.width),this.toolBox.height=Math.abs(this.toolBox.height)},toolBoxMouseDown:function(t){var o=this.$refs.toolBoxControl;this.toolBox.x=parseInt(o.style.left.split("px")[0]),this.toolBox.y=parseInt(o.style.top.split("px")[0]),this.toolBox.disable=!1,this.dropImg.active=!1,this.toolBox.boxMove.start={x:t.pageX,y:t.pageY}},toolBoxMouseMove:function(t){if(this.dropImg.active&&this.dropImgMove(t),!1===this.toolBox.disable&&!0===this.moveAble){var o=t.pageX-this.toolBox.boxMove.start.x,i=t.pageY-this.toolBox.boxMove.start.y,e=this.toolBox.x+o,s=this.toolBox.y+i;this.drawControlBox(this.toolBox.width,this.toolBox.height,e,s)}},toolBoxMouseLeave:function(){this.toolBox.disable=!0,this.resetToolBox()},toolBoxMouseUp:function(t){this.toolBox.x=parseInt(this.toolBoxPosition.x),this.toolBox.y=parseInt(this.toolBoxPosition.y),this.toolBox.disable=!0,this.dropImg.active=!1,this.resetToolBox()},printImg:function(){if(this.drawImg.img){var t=this.$refs.canvas,o=t.getContext("2d");o.save(),o.clearRect(0,0,t.width,t.height),o.translate(this.drawImg.x+this.drawImg.width/2,this.drawImg.y+this.drawImg.height/2),o.rotate(this.rotateImg.angle*Math.PI/180),o.translate(-(this.drawImg.x+this.drawImg.width/2),-(this.drawImg.y+this.drawImg.height/2)),o.translate(this.drawImg.x,this.drawImg.y),o.drawImage(this.drawImg.img,this.drawImg.sx,this.drawImg.sy,this.drawImg.swidth,this.drawImg.sheight,0,0,this.drawImg.width,this.drawImg.height),o.translate(-this.drawImg.x,-this.drawImg.y),o.restore()}},dropImgOn:function(t){this.dropImg.active=!0,this.dropImg.params=Object(s.a)({},this.drawImg),this.dropImg.pageX=t.pageX,this.dropImg.pageY=t.pageY},dropImgOff:function(){this.dropImg.active=!1},dropImgMove:function(t){if(this.dropImg.active&&this.drawImg.img){var o=Object(s.a)({},this.drawImg);o.x=this.dropImg.params.x-(this.dropImg.pageX-t.pageX),o.y=this.dropImg.params.y-(this.dropImg.pageY-t.pageY),this.$set(this,"drawImg",o),this.printImg(),t.stopPropagation()}},scaleReset:function(){this.drawImg.width=this.drawImg.swidth,this.drawImg.height=this.drawImg.sheight,this.printImg()},scaleImgWheel:function(t){if(this.drawImg.img){var o,i=t||window.event;i.wheelDelta?o=-i.wheelDelta/40:i.detail&&(o=i.detail);this.drawImg.x=this.drawImg.width-9*o>50?this.drawImg.x+3*o:this.drawImg.x,this.drawImg.y=this.drawImg.width-9*o>50?this.drawImg.y+3*o:this.drawImg.y,this.drawImg.width=this.drawImg.width-9*o>50?this.drawImg.width-9*o:50,this.drawImg.height=this.drawImg.width/this.scaleImg.rate,this.printImg()}return t.preventDefault(),t.returnValue=!1,!1},turnImg:function(t){var o=this.rotateImg.angle+t;o>=-180&&o<=180&&(this.rotateImg.angle=o,this.rotateControl.position=o/180*100+100,this.printImg("rotate"))},turnReset:function(){this.rotateImg.angle=0,this.rotateControl.position=100,this.printImg("rotate")},controlBtnMouseDown:function(t,o){this.controlBox.disable=!1,this.controlBox.btnName=o,this.controlBox.start.x=t.clientX,this.controlBox.start.y=t.clientY,this.controlBox.start.width=this.toolBox.width,this.controlBox.start.height=this.toolBox.height,t.stopPropagation()},controlBtnMouseUp:function(t){this.controlBox.disable=!0,this.dropImgOff(),this.resetToolBox(),this.toolBoxMouseUp(),t.stopPropagation()},controlBtnMouseMove:function(t){if(!1===this.controlBox.disable){var o,i,e=t.clientX-this.controlBox.start.x,s=t.clientY-this.controlBox.start.y;"leftUp"==this.controlBox.btnName&&(o=this.toolBox.x+e,i=this.toolBox.y+s,this.toolBox.width=this.controlBox.start.width-e,this.toolBox.height=this.controlBox.start.height-s),"rightUp"==this.controlBox.btnName&&(o=this.toolBox.x,i=this.toolBox.y+s,this.toolBox.width=this.controlBox.start.width+e,this.toolBox.height=this.controlBox.start.height-s),"rightDown"==this.controlBox.btnName&&(o=this.toolBox.x,i=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+e,this.toolBox.height=this.controlBox.start.height+s),"leftDown"==this.controlBox.btnName&&(o=this.toolBox.x+e,i=this.toolBox.y,this.toolBox.width=this.controlBox.start.width-e,this.toolBox.height=this.controlBox.start.height+s),"topCenter"==this.controlBox.btnName&&(o=this.toolBox.x,i=this.toolBox.y+s,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height-s),"downCenter"==this.controlBox.btnName&&(o=this.toolBox.x,i=this.toolBox.y,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height+s),"leftCenter"==this.controlBox.btnName&&(o=this.toolBox.x+e,i=this.toolBox.y,this.toolBox.width=this.controlBox.start.width-e,this.toolBox.height=this.controlBox.start.height),"rightCenter"==this.controlBox.btnName&&(o=this.toolBox.x,i=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+e,this.toolBox.height=this.controlBox.start.height),this.drawControlBox(this.toolBox.width,this.toolBox.height,o,i)}t.stopPropagation()},cropPicture:function(){var t=this,o=this.$refs.canvas,i=new Image;!0===this.crossOrigin&&(i.crossOrigin=this.crossOriginHeader),i.src=o.toDataURL(),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,i,e){window.atob?setTimeout((function(){for(var s=atob(o.toDataURL(i,e).split(",")[1]),a=s.length,r=new Uint8Array(a),n=0;n<a;n++)r[n]=s.charCodeAt(n);t(new Blob([r],{type:i||"image/png"}))}),200):t(!1,{type:"image/png"})}}),o.toBlob((function(o){if(o){var e=new FileReader;e.readAsDataURL(o),e.onload=function(){var o=setInterval((function(){if(2==e.readyState){clearInterval(o);var s=document.createElement("canvas"),a=s.getContext("2d");if(1==t.originalGraph){var r=t.drawImg.width/t.drawImg.swidth,n=t.toolBox.width/r,l=t.toolBox.height/r;s.width=n,s.height=l;var h=(t.toolBox.x-t.drawImg.x)/r,c=(t.toolBox.y-t.drawImg.y)/r,d=t.drawImg.swidth,g=t.drawImg.sheight;a.translate(-h,-c),a.drawImage(t.drawImg.img,0,0,d,g)}else{s.width=t.toolBox.width,s.height=t.toolBox.height;var m=t.toolBox;if(t.rate){var u=t.rate.split(":")[0]/t.rate.split(":")[1];a.drawImage(i,m.x,m.y,m.width,m.width*u,0,0,m.width,m.width*u)}else a.drawImage(i,m.x,m.y,m.width,m.height,0,0,m.width,m.height)}s.toBlob((function(o){t.handleClose(),t.$emit("cutDown",{fileName:t.fileName,blob:o,file:t.dataURLtoFile(s.toDataURL(),t.fileName),dataURL:s.toDataURL()})}),"image/jpeg",.95)}}),200)}}else{var s=document.createElement("canvas");s.width=t.toolBox.width,s.height=t.toolBox.height;var a=s.getContext("2d"),r=t.toolBox;if(t.rate){var n=t.rate.split(":")[0]/t.rate.split(":")[1];a.drawImage(i,r.x,r.y,r.width,r.width*n,0,0,r.width,r.width*n)}else a.drawImage(i,r.x,r.y,r.width,r.height,0,0,r.width,r.height);t.handleClose(),t.$emit("cutDown",{fileName:t.fileName,dataURL:s.toDataURL()})}}))},scrollBarControlMove:function(t){if(this.rotateControl.active){var o=t.pageX-this.rotateControl.start.x,i=this.rotateControl.start.position+o;i<=0&&(i=0),i>=200&&(i=200),this.rotateControl.position=i,this.rotateImg.angle=(i-100)/100*180,this.printImg()}},scrollBarControlOn:function(t){this.rotateControl.active=!0,this.rotateControl.start.x=t.pageX,this.rotateControl.start.y=t.pageY,this.rotateControl.start.position=this.rotateControl.position},scrollBarControlOff:function(){this.rotateControl.active=!1}}}),n=(i(489),i(1)),l=Object(n.a)(r,(function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",[!0===t.showChooseBtn&&!0===t.isModal?i("div",{on:{click:t.handleOpen}},[t._t("openImgCutter"),t._v(" "),t._t("open")],2):t._e(),t._v(" "),t.$slots.openImgCutter||t.$slots.open||!0!==t.isModal?t._e():i("button",{staticClass:"btn btn-primary",on:{click:t.handleOpen}},[t._v(t._s(t.label))]),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.visible?i("div",{ref:"mask",class:!0===t.isModal?"mask vue-img-cutter":""},[t.visible?i("div",{class:!0===t.isModal?"dialogBoxModal":"dialogBox"},[i("transition",{attrs:{name:"fade","enter-class":"fade-in-enter","enter-active-class":"fade-in-active","leave-class":"fade-out-enter","leave-active-class":"fade-out-active"}},[i("div",{ref:"dialogMainModalRef",class:!0===t.isModal?"dialogMainModal":"dialogMain",style:"width:"+(!0===t.isModal?t.boxWidth+32:t.boxWidth)+"px"},[i("div",{staticClass:"toolMain"},[!0===t.isModal?i("div",{staticClass:"tool-title"},[t._v("\n                图片裁剪\n                "),i("span",{staticClass:"closeIcon",on:{click:t.handleClose}},[t._v("×")])]):t._e(),t._v(" "),i("div",{ref:"toolBox",staticClass:"toolBox",style:"height:"+t.boxHeight+"px;width:"+t.boxWidth+"px",on:{mousemove:t.controlBtnMouseMove,mouseup:t.controlBtnMouseUp,mouseleave:t.controlBtnMouseUp}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.drawImg.img&&!0===t.showChooseBtn,expression:"!drawImg.img && showChooseBtn===true"}],staticClass:"tips"},[i("div",{staticClass:"btn btn-warning btn-xs",on:{click:t.chooseImg}},[t._v(t._s(t.label))])]),t._v(" "),1==t.tool?i("div",{directives:[{name:"show",rawName:"v-show",value:this.drawImg.img&&!0!==t.dropImg.active&&1==t.controlBox.disable&&1==t.toolBox.disable,expression:"this.drawImg.img && dropImg.active!==true && controlBox.disable==true && toolBox.disable==true"}],staticClass:"dockMain",style:"background:"+this.toolBgc,on:{mouseenter:t.dropImgOff}},[t.rate?i("div",{staticClass:"dockBtn"},[t._v("比例："+t._s(t.rate))]):t._e(),t._v(" "),i("div",{staticClass:"dockBtn",on:{click:t.scaleReset}},[t._v("\n                    缩放："+t._s(t.drawImg.swidth>0?(t.drawImg.width/t.drawImg.swidth).toFixed(2):"-")+"\n                  ")]),t._v(" "),!1===t.originalGraph?i("div",{staticClass:"dockBtn",on:{click:function(o){return t.turnImg(-90)}}},[t._v("左转90°")]):t._e(),t._v(" "),!1===t.originalGraph?i("div",{staticClass:"dockBtn",on:{click:function(o){return t.turnImg(90)}}},[t._v("右转90°")]):t._e(),t._v(" "),!1===t.originalGraph?i("div",{staticClass:"dockBtn",on:{click:function(o){return t.turnReset()}}},[t._v("复位")]):t._e(),t._v(" "),!1===t.originalGraph?i("div",{staticClass:"dockBtnScrollBar"},[i("div",{ref:"dockBtnScrollControl",staticClass:"scrollBarControl",style:"left:"+t.rotateControl.position+"px",on:{mousemove:t.scrollBarControlMove,mousedown:t.scrollBarControlOn,mouseleave:t.scrollBarControlOff,mouseup:t.scrollBarControlOff}}),t._v(" "),1==t.rotateControl.active?i("div",{staticClass:"scrollBarText",style:"left:"+t.rotateControl.position+"px"},[t._v("\n                      "+t._s(t.rotateImg.angle.toFixed(0)+"°")+"\n                    ")]):t._e()]):t._e()]):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.drawImg.img,expression:"drawImg.img!=null"}],ref:"toolBoxControl",staticClass:"toolBoxControl",on:{mousedown:t.toolBoxMouseDown,mouseup:t.toolBoxMouseUp,mousemove:t.toolBoxMouseMove,mouseleave:t.toolBoxMouseLeave}},[i("div",{staticClass:"toolBoxControlBox"},[i("div",{staticClass:"controlBox"},[i("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineTop"}),t._v(" "),i("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineBottom"}),t._v(" "),i("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineLeft"}),t._v(" "),i("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineRight"}),t._v(" "),!1===t.originalGraph?i("div",{staticClass:"selectArea"},[t._v("\n                        宽:"+t._s(t.toolBox.width)+" 高:"+t._s(t.toolBox.height)+"\n                        (x:"+t._s(t.toolBoxPosition.x)+",y:"+t._s(t.toolBoxPosition.y)+")\n                      ")]):t._e(),t._v(" "),!0===t.originalGraph?i("div",{staticClass:"selectArea"},[t._v("\n                        宽:"+t._s((t.toolBox.height/(t.drawImg.width/t.drawImg.swidth)).toFixed(0))+" 高:"+t._s((t.toolBox.height/(t.drawImg.width/t.drawImg.swidth)).toFixed(0))+"\n                        (x:"+t._s(t.toolBoxPosition.x)+",y:"+t._s(t.toolBoxPosition.y)+")\n                      ")]):t._e(),t._v(" "),!0===t.sizeChange?i("div",{staticClass:"leftUp controlBtn",attrs:{"data-name":"leftUp"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"leftUp")}}}):t._e(),t._v(" "),!0===t.sizeChange?i("div",{staticClass:"leftDown controlBtn",attrs:{"data-name":"leftDown"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"leftDown")}}}):t._e(),t._v(" "),!0===t.sizeChange?i("div",{staticClass:"rightUp controlBtn",attrs:{"data-name":"rightUp"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"rightUp")}}}):t._e(),t._v(" "),!0===t.sizeChange?i("div",{staticClass:"rightDown controlBtn",attrs:{"data-name":"rightDown"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"rightDown")}}}):t._e(),t._v(" "),!0===t.sizeChange&&!t.rate&&this.toolBox.width>20?i("div",{staticClass:"topCenter controlBtn",attrs:{"data-name":"topCenter"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"topCenter")}}}):t._e(),t._v(" "),!0===t.sizeChange&&!t.rate&&this.toolBox.width>20?i("div",{staticClass:"downCenter controlBtn",attrs:{"data-name":"downCenter"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"downCenter")}}}):t._e(),t._v(" "),!0===t.sizeChange&&!t.rate&&this.toolBox.height>20?i("div",{staticClass:"leftCenter controlBtn",attrs:{"data-name":"leftCenter"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"leftCenter")}}}):t._e(),t._v(" "),!0===t.sizeChange&&!t.rate&&this.toolBox.height>20?i("div",{staticClass:"rightCenter controlBtn",attrs:{"data-name":"rightCenter"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"rightCenter")}}}):t._e()]),t._v(" "),i("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-1"}),t._v(" "),i("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-2"}),t._v(" "),i("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-3"}),t._v(" "),i("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-4"})])]),t._v(" "),i("canvas",{ref:"canvasSelectBox",staticClass:"canvasSelectBox",attrs:{width:t.boxWidth,height:t.boxHeight},on:{mousedown:t.dropImgOn,mouseup:t.dropImgOff,mousemove:t.dropImgMove}}),t._v(" "),i("canvas",{ref:"canvas",staticClass:"canvas",attrs:{width:t.boxWidth,height:t.boxHeight}})])]),t._v(" "),i("div",{staticClass:"i-dialog-footer"},[i("input",{ref:"inputFile",staticStyle:{width:"1px",height:"1px",border:"none",opacity:"0"},attrs:{type:"file",accept:"image/gif, image/jpeg ,image/png"},on:{change:t.putImgToCanv}}),t._v(" "),i("span",{on:{click:t.chooseImg}},[t._t("choose",[!0===t.showChooseBtn?i("div",{staticClass:"btn btn-primary btn-primary-plain"},[t._v(t._s(t.label))]):t._e()])],2),t._v(" "),i("div",{staticClass:"btn-group fr"},[i("span",{on:{click:t.handleClose}},[t._t("cancel",[i("div",{staticClass:"btn btn-default"},[t._v("取消")])])],2),t._v(" "),i("span",{on:{click:t.cropPicture}},[t._t("confirm",[i("div",{staticClass:"btn btn-primary",staticStyle:{"margin-left":"15px"},attrs:{disabled:!t.drawImg.img,type:"primary"}},[t._v("确定")])])],2)])])])]),t._v(" "),i("div",{staticStyle:{clear:"both"}})],1):t._e()]):t._e()])],1)}),[],!1,null,"e8fa9060",null).exports,h=i(151),c=i.n(h);e.default.use(c.a);var d={name:"simple-imageCrop",components:{"s-imageCrop":l},data:function(){return{cutImgSrc:"http://placekitten.com/300/300",cutImgWidth:300,cutImgHeight:300,imgSrc:null,refresh:!0,params:{label:"Crop local pictures",crossOrigin:!0,crossOriginHeader:"*",rate:"",toolBgc:"none",isModal:!1,showChooseBtn:!0,lockScroll:!0,boxWidth:500,boxHeight:458,cutWidth:250,cutHeight:250,sizeChange:!0,moveAble:!0,tool:!0,originalGraph:!1},code:'\n        <s-imageCrop\n          v-if="refresh"\n          ref="imgCutterModal"\n          :crossOrigin="params.crossOrigin"\n          :label="params.label"\n          :rate="params.rate"\n          :isModal="params.isModal"\n          :showChooseBtn="params.showChooseBtn"\n          :lockScroll="params.lockScroll"\n          :boxWidth="params.boxWidth"\n          :boxHeight="params.boxHeight"\n          :cutWidth="params.cutWidth"\n          :cutHeight="params.cutHeight"\n          :sizeChange="params.sizeChange"\n          :moveAble="params.moveAble"\n          :tool="params.tool"\n          :originalGraph="params.originalGraph"\n          :DoNotDisplayCopyright="true"\n          toolBgc="params.toolBgc"\n          v-on:error="catchError"\n          v-on:cutDown="cutDown">\n          <span slot="open"></span>\n          <span slot="choose" v-if="params.isModal==false"></span>\n          <span slot="cancel" v-if="params.isModal==false"></span>\n          <span slot="confirm" v-if="params.isModal==false"></span>\n        </s-imageCrop>\n        '.replace(/^ {8}/gm,"").trim()}},mounted:function(){var t=this.$refs.imgCutterBox;this.params.boxWidth=t.offsetWidth-30},methods:{cutDown:function(t){console.log(t),this.imgSrc=t.dataURL},doRefresh:function(){var t=this;this.refresh=!1,this.$nextTick((function(){t.refresh=!0}))},catchInput:function(t){var o=t.target.value;this[t.target.name]=o},catchError:function(t){console.log(t),window.alert(t.msg)},pluginExe:function(t){this.$refs.imgCutterModal[t]()}}},g=(i(490),Object(n.a)(d,(function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",[i("p",[t._v("用于图片裁剪")]),t._v(" "),i("h3",[t._v("基础用法")]),t._v(" "),i("simple-card",{scopedSlots:t._u([{key:"code",fn:function(){return[i("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[i("code",{staticClass:"vue"},[t._v(t._s(t.code))])])]},proxy:!0}])},[i("div",{staticClass:"row",staticStyle:{"margin-top":"40px"}},[i("div",{ref:"imgCutterBox",staticClass:"col-md-6",staticStyle:{height:"458px",overflow:"hidden"}},[t.params.isModal?i("div",{staticStyle:{width:"100%",height:"458px",background:"#dedede","box-sizing":"border-box",border:"1px solid #dedede"}},[i("div",{staticStyle:{width:"50%",margin:"180px auto auto auto"}},[i("div",{staticClass:"btn btn-primary btn-block",on:{click:function(o){return t.pluginExe("handleOpen")}}},[t._v(t._s(t.params.label))])])]):t._e(),t._v(" "),t.refresh?i("s-imageCrop",{ref:"imgCutterModal",attrs:{crossOrigin:t.params.crossOrigin,label:t.params.label,rate:t.params.rate,isModal:t.params.isModal,showChooseBtn:t.params.showChooseBtn,lockScroll:t.params.lockScroll,boxWidth:t.params.boxWidth,boxHeight:t.params.boxHeight,cutWidth:t.params.cutWidth,cutHeight:t.params.cutHeight,sizeChange:t.params.sizeChange,moveAble:t.params.moveAble,tool:t.params.tool,originalGraph:t.params.originalGraph,DoNotDisplayCopyright:!0,toolBgc:"params.toolBgc"},on:{error:t.catchError,cutDown:t.cutDown}},[i("span",{attrs:{slot:"open"},slot:"open"}),t._v(" "),0==t.params.isModal?i("span",{attrs:{slot:"choose"},slot:"choose"}):t._e(),t._v(" "),0==t.params.isModal?i("span",{attrs:{slot:"cancel"},slot:"cancel"}):t._e(),t._v(" "),0==t.params.isModal?i("span",{attrs:{slot:"confirm"},slot:"confirm"}):t._e()]):t._e()],1),t._v(" "),i("div",{staticClass:"col-md-3"},[i("div",{staticClass:"imgCutDownBox",style:"height:458px;"},[i("div",{staticClass:"imgCutDownBoxContainer"},[t.imgSrc?i("img",{attrs:{src:t.imgSrc,alt:""}}):i("span",{staticClass:"imgCutDownTips"},[t._v("Cut it out and show it here")])]),t._v(" "),i("div",{staticClass:"text-center"},[i("a",{class:"btn btn-light"+(t.imgSrc?"":" disabled"),attrs:{disabled:!t.imgSrc,href:t.imgSrc,download:"image.jpg",role:"button"}},[t._v("Download")])])])]),t._v(" "),i("div",{staticClass:"col-md-3"},[i("form",[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"cutImgSrc"}},[t._v(" Remote pictures src：")]),t._v(" "),i("input",{staticClass:"form-control",attrs:{type:"text",name:"cutImgSrc",placeholder:"Remote pictures src"},domProps:{value:t.cutImgSrc},on:{input:function(o){return t.catchInput(o)}}})]),t._v(" "),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"cutImgWidth"}},[t._v(" Remote pictures width：")]),t._v(" "),i("input",{staticClass:"form-control",attrs:{type:"number",name:"cutImgWidth",placeholder:"Remote pictures width"},domProps:{value:t.cutImgWidth},on:{input:function(o){return t.catchInput(o)}}})]),t._v(" "),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"cutImgHeight"}},[t._v(" Remote pictures height：")]),t._v(" "),i("input",{staticClass:"form-control",attrs:{type:"number",name:"cutImgHeight",placeholder:"Remote pictures height"},domProps:{value:t.cutImgHeight},on:{input:function(o){return t.catchInput(o)}}})]),t._v(" "),i("div",{staticClass:"form-group"},[!1===t.params.isModal?i("div",{staticClass:"btn btn-primary btn-block",on:{click:function(o){return t.pluginExe("chooseImg")}}},[t._v(t._s(t.params.label))]):t._e(),t._v(" "),!0===t.params.isModal?i("div",{staticClass:"btn btn-primary btn-block",on:{click:function(o){return t.pluginExe("handleOpen")}}},[t._v(t._s(t.params.label))]):t._e()]),t._v(" "),i("div",{staticClass:"form-group"},[i("button",{staticClass:"btn btn-success btn-block",attrs:{type:"button",disabled:!0===t.params.isModal},on:{click:function(o){return t.pluginExe("cropPicture")}}},[t._v("Confirm")])]),t._v(" "),i("div",{staticClass:"form-group"},[i("button",{staticClass:"btn btn-light btn-block",attrs:{type:"button",disabled:!0===t.params.isModal},on:{click:function(o){return t.pluginExe("clearAll")}}},[t._v("Reset")])])])])])])],1)}),[],!1,null,null,null));o.default=g.exports}}]);